/*******************************************************
 *  HOMEKIT DARK THEME â€” AUTOMAZIONE CASA
 *  Transizioni + Animazioni + Card stile Apple Casa
 *******************************************************/

:root{
  --bg: #0d0f14;
  --bg2:#11141b;
  --text:#eaf0f7;
  --muted:#8b94a5;

  --card:#181d27;
  --card2:#1f2531;

  --accent:#0b84ff;
  --good:#27d17c;
  --warn:#ffb454;
  --bad:#ff6e6e;

  --radius:18px;
  --pad:16px;

  --shadow:0 8px 28px rgba(0,0,0,.34);

  --fade-fast: .25s;
  --fade-slow: .45s;
}

/*******************************************************
 *  GLOBAL
 *******************************************************/
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
}

.fade-in{
  animation:fadeIn .6s ease both;
}
.slide-up{
  animation:slideUp .6s ease both;
}

@keyframes fadeIn {
  from{ opacity:0; transform:translateY(4px); }
  to{ opacity:1; transform:translateY(0); }
}

@keyframes slideUp {
  from{ opacity:0; transform:translateY(25px); }
  to{ opacity:1; transform:translateY(0); }
}

/*******************************************************
 *  HEADER
 *******************************************************/
.hk-header{
  background:rgba(13,15,20,.85);
  backdrop-filter:blur(18px);
  border-bottom:1px solid rgba(255,255,255,.07);
  padding:20px;
}
.hk-header-inner{
  display:flex;
  flex-direction:column;
  gap:4px;
}
.hk-state-main{
  font-size:28px;
  font-weight:600;
  margin:0;
}
.hk-header-meta{
  font-size:13px;
  color:var(--muted);
}

/*******************************************************
 *  LAYOUT
 *******************************************************/
.hk-container{
  max-width:1000px;
  margin:auto;
  padding:18px;
  display:grid;
  gap:18px;
}

/*******************************************************
 *  CARDS
 *******************************************************/
.hk-card{
  background:var(--card);
  padding:var(--pad);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  border:1px solid rgba(255,255,255,.08);
  transform:translateZ(0);
  transition:background .3s;
}

.hk-card:hover{
  background:var(--card2);
}

.hk-card-title{
  font-size:16px;
  font-weight:600;
  margin-bottom:14px;
}

/*******************************************************
 *  GRID
 *******************************************************/
.hk-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:14px;
}
.hk-item{
  background:var(--card2);
  padding:12px;
  border-radius:var(--radius);
  border:1px solid rgba(255,255,255,.07);
  transition:all .25s;
}
.hk-item:hover{
  background:#242a37;
}
.hk-label{
  font-size:12px;
  color:var(--muted);
}
.hk-value{
  font-size:15px;
  margin-top:3px;
  font-weight:600;
}

/*******************************************************
 *  PERSONE
 *******************************************************/
.hk-people{
  list-style:none;
  padding:0;
  margin:0;
  display:grid;
  gap:10px;
}
.person{
  background:var(--card2);
  border-radius:var(--radius);
  padding:12px 14px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border:1px solid rgba(255,255,255,.06);
  transition:.25s;
}
.person:hover{
  background:#242a37;
}

.badge{
  padding:5px 12px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  transition:.25s;
}
.badge.in{
  background:rgba(39,209,124,.25);
  color:#98f7c9;
}
.badge.out{
  background:rgba(255,110,110,.22);
  color:#ffc9c9;
}

/*******************************************************
 *  BUTTONS
 *******************************************************/
.hk-grid-btn{
  display:flex;
  flex-direction:column;
  gap:12px;
}

.hk-btn{
  background:var(--card2);
  border:1px solid rgba(255,255,255,.08);
  border-radius:var(--radius);
  padding:14px;
  color:var(--text);
  font-weight:600;
  cursor:pointer;
  font-size:15px;
  transition:background .25s, transform .15s;
}

.hk-btn:active{
  transform:scale(.97);
}

.hk-btn:hover{
  background:#232935;
}

.hk-btn-big{
  font-size:17px;
  padding:16px;
}

.hk-btn-dual{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

.hk-btn-title{
  color:var(--muted);
  font-size:13px;
  margin-bottom:4px;
}

/*******************************************************
 *  TOAST
 *******************************************************/
.hk-toast{
  position:fixed;
  bottom:25px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.78);
  padding:12px 18px;
  border-radius:var(--radius);
  color:white;
  font-weight:600;
  display:none;
  box-shadow:0 4px 18px rgba(0,0,0,.4);
}
.hk-toast.show{
  display:block;
  animation:fadeIn .4s ease both;
}

/*******************************************************
 *  MEDIA
 *******************************************************/
@media(max-width:700px){
  .hk-grid{ grid-template-columns:1fr; }
  .hk-btn-big{ font-size:16px; }
}

/* Pulsante press stile iOS */
.hk-press {
  animation: hkPress .18s cubic-bezier(.34,.07,.34,1.55);
}

@keyframes hkPress {
  0%   { transform: scale(1); }
  40%  { transform: scale(.94); background:#2a3143; }
  100% { transform: scale(1); }
}

/* Effetto lampo/bloom HomeKit */
.hk-pulse {
  position: relative;
}
.hk-pulse::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: var(--radius);
  background: rgba(255,255,255,.16);
  animation: hkPulseFx .45s ease-out;
}
@keyframes hkPulseFx {
  from { opacity: .65; transform: scale(.95); }
  to   { opacity: 0;   transform: scale(1.18); }
}
``
/* Pulsante press stile iOS */
.hk-press {
  animation: hkPress .18s cubic-bezier(.34,.07,.34,1.55);
}

@keyframes hkPress {
  0%   { transform: scale(1); }
  40%  { transform: scale(.94); background:#2a3143; }
  100% { transform: scale(1); }
}

/* Effetto lampo/bloom HomeKit */
.hk-pulse {
  position: relative;
}
.hk-pulse::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: var(--radius);
  background: rgba(255,255,255,.16);
  animation: hkPulseFx .45s ease-out;
}
@keyframes hkPulseFx {
  from { opacity: .65; transform: scale(.95); }
  to   { opacity: 0;   transform: scale(1.18); }
}
``
/* Pulsante press stile iOS */
.hk-press {
  animation: hkPress .18s cubic-bezier(.34,.07,.34,1.55);
}

@keyframes hkPress {
  0%   { transform: scale(1); }
  40%  { transform: scale(.94); background:#2a3143; }
  100% { transform: scale(1); }
}

/* Effetto lampo/bloom HomeKit */
.hk-pulse {
  position: relative;
}
.hk-pulse::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: var(--radius);
  background: rgba(255,255,255,.16);
  animation: hkPulseFx .45s ease-out;
}
@keyframes hkPulseFx {
  from { opacity: .65; transform: scale(.95); }
  to   { opacity: 0;   transform: scale(1.18); }
}
``

/* Ombra Apple Home */
.hk-card {
  box-shadow:
    0 8px 20px rgba(0,0,0,.30),
    0 4px 10px rgba(0,0,0,.22),
    0 0 2px rgba(255,255,255,.07) inset;
}

/* Highlight aggiornamento */
.hk-card.update-flash {
  animation: flashUpdate .7s ease-out;
}

@keyframes flashUpdate {
  0%   { box-shadow:0 0 0 rgba(0,150,255,.0); }
  40%  { box-shadow:0 0 28px rgba(0,150,255,.45); }
  100% { box-shadow:var(--shadow); }
}

/* Icone tapparelle animate */
.hk-blind {
  display:inline-block;
  width:22px;
  height:22px;
  border-radius:6px;
  background:linear-gradient(to bottom,#4f5b74,#222733);
  position:relative;
  overflow:hidden;
}
.hk-blind::after {
  content:"";
  position:absolute;
  left:0; right:0;
  height:60%;
  background:rgba(255,255,255,.17);
  animation:blindMove 1.2s ease infinite;
}

@keyframes blindMove {
  0%   { top:-10%; }
  100% { top:100%; }
}

/* Icone tapparelle animate */
.hk-blind {
  display:inline-block;
  width:22px;
  height:22px;
  border-radius:6px;
  background:linear-gradient(to bottom,#4f5b74,#222733);
  position:relative;
  overflow:hidden;
}
.hk-blind::after {
  content:"";
  position:absolute;
  left:0; right:0;
  height:60%;
  background:rgba(255,255,255,.17);
  animation:blindMove 1.2s ease infinite;
}

@keyframes blindMove {
  0%   { top:-10%; }
  100% { top:100%; }
}

/* Icone tapparelle animate */
.hk-blind {
  display:inline-block;
  width:22px;
  height:22px;
  border-radius:6px;
  background:linear-gradient(to bottom,#4f5b74,#222733);
  position:relative;
  overflow:hidden;
}
.hk-blind::after {
  content:"";
  position:absolute;
  left:0; right:0;
  height:60%;
  background:rgba(255,255,255,.17);
  animation:blindMove 1.2s ease infinite;
}

@keyframes blindMove {
  0%   { top:-10%; }
  100% { top:100%; }
}

/* Loading shimmer stile Apple Casa */
.hk-shimmer {
  position:relative;
  background:linear-gradient(100deg,#2a2f3a 20%,#3d4452 40%,#2a2f3a 60%);
  background-size:200% 100%;
  animation:hkShimmer 1.4s infinite;
  color:transparent !important;
}

@keyframes hkShimmer {
  0%   { background-position:200% 0; }
  100% { background-position:-200% 0; }
}
