:root{
  /* gradient quasi identico allo screenshot */
  --bg1:#10263f; --bg2:#14506b; --bg3:#1a7a86;
  --text:#edf1f8; --muted:#a7b3c5; --line:rgba(255,255,255,.08);

  --cardDark:rgba(9,12,18,.55);
  --cardShell:rgba(0,0,0,.35);
  --chip:rgba(0,0,0,.75);
  --blue:#0a84ff; --good:#34c759; --warn:#ff9f0a; --bad:#ff453a;

  --r:18px; --r-lg:22px; --blur:18px;
  --shadow:0 10px 30px rgba(0,0,0,.35);
}

/* BASE */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--text);
  font:16px/1.35 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial;
  background:
    radial-gradient(120% 80% at 80% -10%, var(--bg3), transparent 50%),
    linear-gradient(180deg, var(--bg1), var(--bg2) 60%, #0b1626 100%);
}
.muted{color:var(--muted)}
main{padding:8px 12px 92px}

/* ===== TOPBAR ===== */
.topbar{
  position:sticky; top:0; z-index:50;
  display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
  padding:14px 14px 8px;
  background:linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.15) 65%, transparent);
  backdrop-filter: blur(var(--blur));
}
.home-title{display:flex; align-items:center; gap:8px}
.title-btn{display:inline-flex; align-items:center; gap:4px; background:transparent; border:0; color:inherit; font-weight:800; font-size:18px; cursor:pointer}
.title-btn .chev{opacity:.9}
.icon-btn{background:transparent; border:0; color:inherit; padding:6px; border-radius:12px; cursor:pointer}
.right{display:flex; align-items:center; gap:6px}

/* Stato casa (pillole) */
.state-pills{display:flex; gap:6px; flex-wrap:wrap; margin-top:6px}
.state-pill{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px; border-radius:999px; font-size:13px; font-weight:700;
  background:rgba(255,255,255,.12)
}
.state-pill.good{background:linear-gradient(180deg, rgba(52,199,89,.95), rgba(52,199,89,.6))}
.state-pill.warn{background:linear-gradient(180deg, rgba(255,159,10,.95), rgba(255,159,10,.6))}
.state-pill.bad{ background:linear-gradient(180deg, rgba(255,69,58,.95), rgba(255,69,58,.6))}

/* Meteo chip in alto (nero con puntino giallo) */
.weather-chip{
  display:inline-flex; align-items:center; gap:8px;
  background:var(--chip); border-radius:999px; padding:6px 10px;
  font-weight:800; color:#fff; border:1px solid rgba(255,255,255,.1)
}
.dot-yellow{
  width:18px;height:18px;border-radius:50%;
  background:linear-gradient(180deg, #ffd24d, #ffaa00);
  display:inline-block; box-shadow:0 0 0 2px rgba(0,0,0,.35) inset;
}

/* Sezioni */
.section-label{margin:10px 6px 10px; font-size:14px; color:#d8deea; font-weight:800}

/* DASHBOARD: contenitore scuro con 2 card-pill */
.dash-shell{
  background:linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.3));
  border:1px solid var(--line); border-radius:22px; padding:10px; margin:0 4px 14px;
  display:grid; grid-template-columns:repeat(2,1fr); gap:10px; box-shadow:var(--shadow)
}
.pill-card{
  display:flex; gap:10px; align-items:center;
  background:rgba(255,255,255,.06);
  border-radius:16px; padding:12px 12px;
  border:1px solid rgba(255,255,255,.08);
}
.pill-icon{
  width:34px;height:34px;border-radius:12px;display:grid;place-items:center;background:rgba(255,255,255,.12)
}
.pill-icon.energy{background:rgba(10,132,255,.22)}
.pill-title{font-size:12px}
.pill-value{font-size:16px;font-weight:800}

/* PREFERITI: card azzurre */
.favorites-grid{
  display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); margin:0 4px
}
.tile{
  position:relative;
  background:linear-gradient(180deg, rgba(180,200,230,.28), rgba(200,220,240,.18));
  border:1px solid rgba(255,255,255,.18);
  border-radius:22px; padding:14px; min-height:112px;
  display:flex; flex-direction:column; justify-content:space-between;
  box-shadow:var(--shadow); transition:.18s; user-select:none; cursor:pointer
}
.tile:hover{transform:translateY(-2px)}
.tile .icon-box{
  width:34px;height:34px;border-radius:12px;display:grid;place-items:center;background:rgba(255,255,255,.55); color:#1b2b3b
}
.tile .edit{
  position:absolute; right:10px; top:10px; opacity:.6
}
.tile .t-title{font-weight:800}
.tile .t-sub{font-size:12px;color:#e7eefc;opacity:.9}
.tile .t-value{font-size:13px;color:#dce7fb}
.tile.offline .t-value{color:#cbd4e6}
.tile.on{outline:2px solid rgba(10,132,255,.6); background:linear-gradient(180deg, rgba(140,180,230,.35), rgba(160,200,255,.25))}

/* LISTE (Dispositivi / Log / Life) */
.list .row{
  display:flex; justify-content:space-between; align-items:flex-start;
  padding:12px; border-radius:16px; margin:8px 0;
  background:rgba(255,255,255,.10); border:1px solid var(--line)
}
.row .title{font-weight:800}
.row .sub{color:var(--muted)}
.row-head{display:flex;align-items:center;justify-content:space-between;margin:6px 4px 8px}

/* Bottoni pill */
.pill-btn{
  display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);border-radius:999px;
  background:rgba(255,255,255,.08);color:inherit;padding:8px 12px;cursor:pointer
}

/* Provider + timestamp */
.provider-row{
  display:flex; justify-content:space-between; align-items:center;
  margin:18px 6px 0; font-size:13px
}

/* MENU */
.menu-grid{display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin:0 4px}
.menu-btn{padding:12px; border-radius:14px; border:1px solid var(--line); background:rgba(255,255,255,.10); color:inherit; cursor:pointer}

/* Viste & Tabbar */
.view{display:none}
.view.active{display:block}

/* TABBAR identica */
.tabbar{
  position:fixed; left:0; right:0; bottom:0; z-index:60;
  display:flex; justify-content:space-around; align-items:center; gap:8px;
  padding:8px 8px calc(8px + env(safe-area-inset-bottom));
  background:rgba(0,0,0,.45); border-top:1px solid var(--line);
  backdrop-filter: blur(var(--blur));
}
.tab{
  position:relative;
  display:flex; flex-direction:column; align-items:center; gap:3px;
  background:transparent; color:#d6d6dc; border:0; font-weight:600;
  min-width:72px; padding:4px 6px; cursor:pointer
}
.tab.active{color:#fff}
.orange-dot{
  position:absolute; right:18px; top:6px; width:6px; height:6px; border-radius:50%;
  background:#ff7a00; box-shadow:0 0 0 2px rgba(0,0,0,.35)
}

/* Light mode (se vuoi) */
@media (prefers-color-scheme:light){
  :root{ --text:#101014; --muted:#5f6677; --line:rgba(0,0,0,.08) }
  .tab{color:#555}.tab.active{color:#000}
}
