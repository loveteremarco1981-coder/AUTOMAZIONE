:root{
  --bg-top:#1a5786; --bg-mid:#1a3f66; --bg-btm:#0c1830;
  --text:#e9eef7; --muted:#aab6c7; --line:rgba(255,255,255,.10);
  --card:rgba(255,255,255,.12); --tab-bg:rgba(9,16,28,.65);
  --accent:#0a84ff; --good:#34c759; --warn:#ff9f0a; --bad:#ff453a;
  --r:18px; --blur:18px; --shadow:0 12px 28px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;color:var(--text);
  font:15px/1.35 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial;
  background:
    radial-gradient(120% 80% at 90% -10%, #2a7aa5 0%, transparent 55%),
    linear-gradient(180deg, var(--bg-top), var(--bg-mid) 42%, var(--bg-btm));
}

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:50;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:10px 12px 6px;
  background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.10) 60%, transparent);
  backdrop-filter: blur(var(--blur));
}
.home-btn{display:flex;align-items:center;gap:6px;background:transparent;border:0;color:inherit;padding:6px 8px;border-radius:12px;cursor:pointer}
.ico-home{width:18px;height:18px;opacity:.95}
.home-title{font-weight:700;font-size:17px}
.ico-chev{width:16px;height:16px;opacity:.9}
.right{display:flex;align-items:center;gap:6px}
.icon-btn{background:transparent;border:0;color:inherit;padding:6px;border-radius:12px;cursor:pointer}
.icon-btn svg{width:18px;height:18px}

.weather-pill{
  display:inline-flex; align-items:center; gap:6px;
  background:rgba(0,0,0,.35); padding:6px 10px; border-radius:999px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06); font-weight:700;
}
.weather-pill .dot{width:10px;height:10px;border-radius:999px;background:#ffcc00;box-shadow:0 0 6px #ffcc00aa}

/* Stato */
.chip.state{
  display:inline-flex;align-items:center;padding:6px 10px;border-radius:999px;margin-left:6px;
  background:rgba(255,255,255,.12);font-weight:700
}
.chip.state.neutral{background:linear-gradient(180deg,#2d83e3aa,#2d83e380)}
.chip.state.comfy{background:linear-gradient(180deg,#34c759e0,#34c75999)}
.chip.state.security{background:linear-gradient(180deg,#ff453ae0,#ff453a99)}

/* Content */
main{padding:8px 10px 96px}
.label-ghost{margin:10px 6px 10px;font-size:13px;color:#d7e0ee;opacity:.85;font-weight:700}

/* Dashboard cards */
.cards-row{display:flex;gap:10px;overflow-x:auto;padding:0 6px 4px}
.pill-card{
  min-width:330px;height:76px;border-radius:18px;
  background:linear-gradient(180deg,#0a1726,#0d1f34);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.06), inset 0 -6px 18px rgba(0,0,0,.35), var(--shadow);
  padding:8px 10px;display:flex;align-items:center
}
.pill-inner{display:flex;align-items:center;gap:10px}
.pill-icon{width:44px;height:44px;border-radius:14px;display:grid;place-items:center;background:rgba(255,255,255,.06)}
.pill-icon.energy{background:rgba(10,132,255,.18)}
.pill-icon svg{width:22px;height:22px}
.pill-text .pill-caption{font-size:12px;color:#b7c4d8}
.pill-text .pill-value{font-size:18px;font-weight:800}

/* Favorites grid */
.fav-grid{
  display:grid;gap:12px;padding:0 6px;
  grid-template-columns:repeat(2,minmax(0,1fr))
}
.tile{
  border-radius:18px;background:linear-gradient(180deg,rgba(206,220,233,.85),rgba(164,206,214,.85));
  color:#0c1a2a;min-height:120px;padding:12px;box-shadow:0 10px 22px rgba(0,0,0,.30);
  position:relative;overflow:hidden;cursor:pointer;user-select:none
}
.tile .title{font-weight:700}
.tile .state{margin-top:6px;color:#5b6b7e}
.tile.on{outline:2px solid rgba(10,132,255,.65);background:linear-gradient(180deg,rgba(180,210,240,.9),rgba(130,190,230,.9))}

/* Lists */
.section-label{margin:14px 6px 8px;font-size:14px;color:#d8deea;font-weight:700}
.list .row{
  display:flex;justify-content:space-between;align-items:center;
  background:rgba(255,255,255,.10);border:1px solid var(--line);
  padding:12px;border-radius:16px;margin:8px 6px
}
.row .meta{display:flex;flex-direction:column}
.row .title{font-weight:700}
.row .sub{font-size:13px;color:var(--muted)}
.badge{
  display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;margin:6px;
  background:rgba(255,255,255,.12);font-weight:700
}
.badge.in{background:linear-gradient(180deg,#34c759e0,#34c75999)}
.badge.out{background:linear-gradient(180deg,#74839c,#4a5669)}
.muted{color:var(--muted)}

/* Controls (Vimar) */
.controls{display:flex;gap:8px;align-items:center}
.ctl-btn{
  width:34px;height:34px;border-radius:10px;border:1px solid var(--line);
  display:grid;place-items:center;background:rgba(255,255,255,.10);color:#fff;cursor:pointer
}
.ctl-btn svg{width:18px;height:18px}

/* Toolbar / log */
.row-head{display:flex;justify-content:space-between;align-items:center;margin:8px 6px}
.pill-btn{
  display:inline-flex;gap:8px;align-items:center;border:0;border-radius:999px;
  background:rgba(255,255,255,.1);color:var(--text);padding:8px 12px;cursor:pointer
}

/* Menu / placeholders */
.menu-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;padding:6px}
.menu-btn{padding:12px;border-radius:14px;border:1px solid var(--line);background:rgba(255,255,255,.10);color:inherit;cursor:pointer}
.placeholder{opacity:.6;padding:20px}

/* Tabbar + badge */
.tabbar{
  position:fixed;left:0;right:0;bottom:0;z-index:60;
  display:flex;justify-content:space-around;align-items:center;
  padding:8px 8px calc(8px + env(safe-area-inset-bottom));
  background:var(--tab-bg);border-top:1px solid var(--line);
  backdrop-filter:blur(var(--blur))
}
.tab{
  display:flex;flex-direction:column;align-items:center;gap:2px;background:transparent;border:0;color:#d6dbea;min-width:64px;padding:2px 6px;cursor:pointer;font-weight:600;position:relative
}
.tab svg{width:22px;height:22px}
.tab.active{color:#fff}
.tab.has-dot span::after{
  content:""; position:absolute; right:-8px; top:-2px;
  width:6px;height:6px;border-radius:999px;background:#ff3b30;
}

/* Views */
.view{display:none}
.view.active{display:block}

/* Light mode opzionale */
@media (prefers-color-scheme:light){
  :root{--text:#0e1522;--muted:#51617a}
  .tile{color:#0e1522}
}
