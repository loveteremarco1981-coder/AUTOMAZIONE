:root{
  --bg:#0b0b0d; --text:#e7e7eb; --muted:#a0a0aa;
  --card:rgba(255,255,255,.08); --accent:#0a84ff;
  --r:22px; --blur:18px; --shadow:0 10px 30px rgba(0,0,0,.35);
  --tile:min(44vw,180px); --gap:14px;

  /* colori stato */
  --state-comfy: linear-gradient(180deg, rgba(52,199,89,.95), rgba(52,199,89,.7));
  --state-security: linear-gradient(180deg, rgba(255,69,58,.95), rgba(255,69,58,.7));
  --state-neutral: linear-gradient(180deg, rgba(10,132,255,.92), rgba(10,132,255,.65));
}

*{ box-sizing:border-box }
body{
  margin:0;
  background:radial-gradient(1000px 600px at 70% -20%,#1b1b22 0,#0b0b0d 55%,#000);
  color:var(--text);
  font:16px/1.35 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial
}

/* Header */
.hdr{position:sticky;top:0;z-index:10;padding:22px 18px 12px;
     background:linear-gradient(180deg,rgba(0,0,0,.65),rgba(0,0,0,.2) 70%,transparent);
     backdrop-filter:blur(var(--blur))}
.hdr h1{margin:0 0 6px;font-size:28px;font-weight:700}
.muted{color:var(--muted);font-size:14px}

/* Persone (pillole) */
.people{display:flex;gap:8px;margin:6px 0 8px;flex-wrap:wrap}
.pill{padding:6px 10px;border-radius:999px;font-size:13px;background:rgba(255,255,255,.1)}
.pill.in{background:rgba(46,170,78,.9);color:#fff}
.pill.out{background:rgba(120,120,130,.35)}

/* Views */
.view{display:none;padding:12px 16px 90px}
.view.active{display:block}

.sec-title{margin:4px 0 12px;font-size:20px}

/* Griglia HOME */
.tiles{display:grid;gap:var(--gap);
       grid-template-columns:repeat(auto-fill,minmax(var(--tile),1fr))}
.tile{
  border-radius:var(--r);background:var(--card);box-shadow:var(--shadow);
  padding:14px;min-height:120px;display:flex;flex-direction:column;justify-content:space-between;
  transition:.18s;user-select:none
}
.tile:hover{transform:translateY(-2px)}
.label{font-weight:600}
.value{font-size:26px;font-weight:700;margin-top:8px}
.tile.on{background:linear-gradient(180deg,rgba(10,132,255,.92),rgba(10,132,255,.65));color:#fff}
.tile.switch:not(.on){filter:saturate(.55) brightness(.85);opacity:.88}
.click{cursor:pointer}

/* Tile STATO (accanto a Override) */
.tile.state{color:#fff}
.tile.state.neutral{background:var(--state-neutral)}
.tile.state.comfy{background:var(--state-comfy)}
.tile.state.security{background:var(--state-security)}
.tile.state .value{font-size:20px}

/* Lista (Automazioni placeholder) */
.list .row{
  display:flex;justify-content:space-between;align-items:baseline;
  background:rgba(255,255,255,.05);padding:10px 12px;border-radius:14px;margin:6px 0
}

/* Tabbar in basso */
.tabbar{
  position:fixed;left:0;right:0;bottom:0;z-index:20;
  display:flex;gap:10px;justify-content:space-around;align-items:center;
  padding:10px 12px env(safe-area-inset-bottom);
  backdrop-filter: blur(var(--blur));
  background:rgba(0,0,0,.6);
  border-top:1px solid rgba(255,255,255,.06);
}
.tab{background:transparent;color:#d6d6dc;border:0;font-weight:600}
.tab.active{color:#fff}

/* Toast */
.toast{position:fixed;left:50%;bottom:78px;transform:translateX(-50%);background:rgba(0,0,0,.82);color:#fff;
       padding:10px 14px;border-radius:12px;box-shadow:var(--shadow);opacity:0;pointer-events:none;transition:.2s;z-index:9999}
.toast.show{opacity:1}

/* Light mode */
@media (prefers-color-scheme:light){
  :root{--bg:#f2f2f7;--text:#101014;--card:rgba(255,255,255,.92);--muted:#6b6b76}
  body{background:linear-gradient(180deg,#f8f8fb,#ececf2)}
  .tabbar{background:rgba(255,255,255,.8)}
  .tab{color:#555}.tab.active{color:#000}
}
